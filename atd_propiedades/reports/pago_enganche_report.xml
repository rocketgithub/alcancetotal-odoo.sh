<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <template id="report_pago_enganche">
        <t t-call="web.basic_layout">
        <t t-call="atd_propiedades.common_report_styles"/>
        <style>
            
            body, div, span, strong {
                font-size: 18px !important;
            }   
            .row:nth-child(even) {
                background-color: #f5f5f5;
            }
            .row {
                padding-top: 10px !important;
                padding-bottom: 10px !important;
            }
            .text-right {
                text-align: right;
            }
        </style>
            <t t-foreach="docs" t-as="o">
                    <div class="page">
                    <div class="row">
                    
                        <div class="col-12 text-center" >
                            
                                <t t-if="o.order_id.proyecto_id.icon">
                                    <img t-att-src="image_data_uri(o.order_id.proyecto_id.icon)" alt="Atd Propiedades" style="width: 100%;"/>
                            </t>
                            <h4 class="text-muted">Corporación Vista Hermosa S.A.</h4>
                            <h5 class="text-muted">12 calle 1-25, Zona 10, Edificio Geminis 10</h5>
                            <h5 class="text-muted">Torre Sur, Oficina 1204, Guatemala, Guatemala</h5>
                            <h5 class="text-muted">NIT: 11312982-3</h5>
                            
                        </div>
                    </div>
                        <div class="section-header">
                            <h2>Recibo de caja: 
                                <t t-if="o.recibo_number">
                                    <t-esc t-field="o.recibo_number"/>
                                </t>
                                <t t-else="">
                                    <span>Sin número</span>
                                </t>
                            </h2>
                        </div>
                        <div class="row  "   >
                            <div class="col-12 text-left">
                                <strong>Lugar y fecha:</strong> <span>Guatemala, </span>
                                <span t-field="o.received_date" t-options='{"format": "dd/MM/yyyy"}'/>
                            </div>
                        </div>
                        <div class="row ">
                            <div class="col-12 text-left">
                                <strong>Nombre del comprador:</strong> <span t-field="o.order_id.partner_id.name"/>
                            </div>
                        </div>
                        <div class="row  ">
                            <div class="col-6">
                                <strong>Proyecto:</strong>
                                <span t-field="o.order_id.proyecto_id.name"/>
                            </div>
                            <div class="col-6">
                                <strong>Propiedad:</strong>
                                <span t-field="o.order_id.property_id.name"/>
                            </div>
                        </div>
                        <div class="row  ">
                            <div class="col-6">
                                <strong>Orden de Venta:</strong>
                                <span t-field="o.order_id.name"/>
                            </div>
                            <div class="col-6">
                                <strong>Acuerdo de Compra Venta:</strong>
                                <span t-field="o.order_id.acuerdo_id.name"/>
                            </div>
                        </div>
                        <div class="row  ">
                            <div class="col-12">
                                <strong>Monto en letras:</strong>
                                <span t-esc="o.amount_received_text"/>
                                
                            </div>
                        </div>
                        <div class="row  ">
                            <div class="col-6">
                                <strong>Monto Recibido:</strong>
                                <span t-field="o.amount_received"
                                      t-options='{"widget": "monetary", "display_currency": o.order_id.currency_id}'/>
                            </div>
                            <div class="col-6" t-if="o.journal_id">
                                <strong>Banco receptor:</strong>
                                <span t-field="o.journal_id.name"/>
                            </div>
                            
                        </div>
                        <div class="row ">
                            <div class="col-4">
                                <strong>Tipo de Pago:</strong>
                                <span t-field="o.payment_type_id.name"/>
                            </div>
                            <div class="col-4">
                                <strong>No.</strong>
                                <span t-field="o.boleta"/>
                            </div>
                            <div class="col-4" t-if="o.banco_emisor_id">
                                <strong>Banco Emisor:</strong>
                                <span t-field="o.banco_emisor_id.name"/>
                            </div>
                        </div>
                        <div class="row  ">
                            <div class="col-12">
                                <strong>Descripción:</strong>
                                <p t-field="o.description"/>
                                <span t-field="o.payment_sequence"/>
                            </div>
                        </div>

                        
                        <!-- New Balance Information -->
                        <div class="row ">
                            <div class="col-8">
                                <strong>Saldo anterior de enganche:</strong>
                            </div>
                            <div class="col-4 text-right">
                                <span t-field="o.previous_balance"
                                      t-options='{"widget": "monetary", "display_currency": o.order_id.currency_id}'/>
                            </div>
                        </div>
                        <div class="row  ">
                            <div class="col-8">
                                <strong>Este pago:</strong>
                            </div>
                            <div class="col-4 text-right">
                                <span t-field="o.amount_received"
                                      t-options='{"widget": "monetary", "display_currency": o.order_id.currency_id}'/>
                            </div>
                        </div>
                        <div class="row ">
                            <div class="col-8">
                                <strong>Nuevo saldo de enganche:</strong>
                            </div>
                            <div class="col-4 text-right">
                                <span t-field="o.new_balance"
                                      t-options='{"widget": "monetary", "display_currency": o.order_id.currency_id}'/>
                            </div>
                        </div>
                        <div class="row">

                            <div class="col-12" style="margin-bottom: 1rem;">
                                El saldo mostrado corresponde únicamente al saldo del enganche acordado de 
                                <span t-field="o.order_id.enganche_amount" t-options='{"widget": "monetary", "display_currency": o.order_id.currency_id}'/> 
                                en el acuerdo de compraventa sobre el valor total de venta de 
                                <span t-field="o.order_id.amount_total" t-options='{"widget": "monetary", "display_currency": o.order_id.currency_id}'/>.
                            </div>    
                        
                        </div>
                        <div class="row">
                            <div class="col-12 text-center">
                                <span class="text-muted">*Recibo sujeto a liberación de fondos en el banco receptor.</span>
                            </div>
                        </div>
                    </div>
            </t>
        </t>
    </template>

    

    <record id="paperformat_pago_enganche" model="report.paperformat">
        <field name="name">Pago Enganche A4</field>
        <field name="default" eval="True"/>
        <field name="format">A4</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">10</field>
        <field name="margin_bottom">20</field>
        <field name="margin_left">7</field>
        <field name="margin_right">7</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">90</field>
    </record>

    <record id="action_report_pago_enganche" model="ir.actions.report">
        <field name="name">Recibo de caja</field>
        <field name="model">pago.enganche</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">atd_propiedades.report_pago_enganche</field>
        <field name="report_file">atd_propiedades.report_pago_enganche</field>
        <field name="binding_model_id" ref="model_pago_enganche"/>
        <field name="binding_type">report</field>
        <field name="paperformat_id" ref="paperformat_pago_enganche"/>
    </record>
</odoo> 